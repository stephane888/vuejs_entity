"use strict";(("undefined"!==typeof self?self:this)["webpackChunkEntityDrupal"]=("undefined"!==typeof self?self:this)["webpackChunkEntityDrupal"]||[]).push([[235],{15828:function(e,t,i){i.r(t),i.d(t,{default:function(){return Qe}});var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i(e.render_template,{tag:"component"})],1)},s=[],r=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("section",{staticClass:"step-donneesite mx-auto text-center",attrs:{get_running:e.get_running}},[i("ValidationObserver",{attrs:{tag:"form"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._l(e.fields,(function(e,t){return i(e.template,{key:t,tag:"component",attrs:{field:e.field,model:e.model,class_css:["fieldset-wrapper",e.field.type]}})})),i("div",[i("nextPreviewVue",{attrs:{validation_form:t}})],1)]}}])})],1)},a=[],l=i(79296),o=(i(47941),i(66992),i(41539),i(33948),i(54747),i(77203)),u=i.n(o),c=i(91555),d=i(12950),f=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{class:e.class_css},[i("ValidationProvider",{attrs:{name:e.field.name,rules:e.getRules()},scopedSlots:e._u([{key:"default",fn:function(t){return[i("b-form-group",{attrs:{label:e.field.label,description:e.field.description}},[i("div",{staticClass:"field-item-value"},[i("b-form-input",{attrs:{placeholder:e.field.placeholder,state:e.getValidationState(t),name:e.field.name,debounce:"500"},on:{input:e.input},model:{value:e.input_value,callback:function(t){e.input_value=t},expression:"input_value"}})],1),t.errors?i("div",{staticClass:"text-danger my-2"},e._l(t.errors,(function(t,n){return i("small",{key:n,staticClass:"d-block"},[e._v(" "+e._s(t)+" ")])})),0):e._e()])]}}])})],1)},m=[],p=(i(68309),i(85549)),_=i(63809);(0,p.l7)("email",_.Do),(0,p.l7)("required",(0,l.Z)((0,l.Z)({},_.C1),{},{message:"Ce champs est requis"})),(0,p.l7)("alpha",_.Fq),(0,p.l7)("alpha",_.uR);var h={name:"drupal-string",props:{class_css:{type:[Array]},field:{type:Object,required:!0},model:{type:[Object,Array],required:!0}},components:{ValidationProvider:p.d_},data:function(){return{input_value:null}},mounted:function(){this.input_value=this.getValue()},methods:{getValidationState:function(e){var t=e.dirty,i=e.validated,n=e.valid,s=void 0===n?null:n;return!t&&!i||s?null:s},getRules:function(){return U.getRules(this.field)},setValue:function(e){this.$store.dispatch("renderByStep/setValue",{value:e,fieldName:this.field.name})},getValue:function(){if(this.model[this.field.name]&&this.model[this.field.name][0])return this.model[this.field.name][0].value},input:function(e){var t=[];t.push({value:e}),this.setValue(t)}}},v=h,g=i(1001),b=(0,g.Z)(v,f,m,!1,null,null,null),y=b.exports,k=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{class:e.class_css},[i("b-form-group",{attrs:{label:e.field.label,description:e.field.description}},e._l(e.model[e.field.name],(function(t,n){return i("div",{key:n,staticClass:"field-item-value"},[i("b-form-input",{attrs:{placeholder:e.field.placeholder,type:"color"},model:{value:t.color,callback:function(i){e.$set(t,"color",i)},expression:"val.color"}})],1)})),0)],1)},x=[],C={name:"drupal-string",props:{class_css:{type:[Array]},field:{type:Object,required:!0},model:{type:[Object,Array],required:!0}}},S=C,$=(0,g.Z)(S,k,x,!1,null,null,null),w=$.exports,V=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{class:e.class_css,attrs:{field:"drupal_boolean"}},[i("div",{staticClass:"field-item-value js-form-type-radio",attrs:{format_val:e.format_val}},[i("ValidationProvider",{attrs:{name:e.field.name,rules:e.getRules()},scopedSlots:e._u([{key:"default",fn:function(t){return[i("b-form-group",{attrs:{label:e.field.label,name:e.field.name}},[i("div",{staticClass:"fieldset-wrapper"},[i("div",{staticClass:"radio"},e._l(e.field.entity_form_settings.list_options,(function(n,s){return i("b-form-radio",{key:s,staticClass:"form-check",attrs:{name:e.field.name,value:n.value,state:e.getValidationState(t)},model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}},[i("b-img",{attrs:{thumbnail:"",fluid:"",src:n.image_url,alt:"Image 1"}}),i("div",{staticClass:"mt-5"},[e._v(e._s(n.label))]),n.description.value&&""!==n.description.value?i("div",{staticClass:"mt-5 text-hover",domProps:{innerHTML:e._s(n.description.value)}}):e._e()],1)})),1),t.errors?i("div",{staticClass:"text-danger my-2"},e._l(t.errors,(function(t,n){return i("small",{key:n,staticClass:"d-block"},[e._v(" "+e._s(t)+" ")])})),0):e._e()])])]}}])})],1)])},E=[],Z={name:"drupal-boolean",props:{class_css:{type:[Array]},field:{type:Object,required:!0},model:{type:[Object,Array],required:!0}},components:{ValidationProvider:p.d_},data:function(){return{selected:this.model[this.field.name]&&this.model[this.field.name][0]?this.model[this.field.name][0].value:null}},mounted:function(){this.getImage()},watch:{fieldName:function(){this.getImage()}},methods:{getImage:function(){var e=this;this.field.entity_form_settings.list_options.forEach((function(t){t.image_url||e.$set(t,"image_url",""),t.image[0]&&""==t.image_url&&U.getImageUrl(t.image[0]).then((function(e){t.image_url=e.data}))}))},setValue:function(e){this.$store.dispatch("renderByStep/setValue",{value:e,fieldName:this.field.name})},getValidationState:function(e){var t=e.dirty,i=e.validated,n=e.valid,s=void 0===n?null:n;return!t&&!i||s?null:s},getRules:function(){return U.getRules(this.field)}},computed:{format_val:function(){var e=[];return null!==this.selected&&e.push({value:this.selected}),this.setValue(e),e},fieldName:function(){return this.field.name}}},j=Z,N=(0,g.Z)(j,V,E,!1,null,null,null),q=N.exports,R=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{class:e.class_css},[i("div",{staticClass:"field-item-value js-form-type-checkbox"},[i("ValidationProvider",{attrs:{name:e.field.name,rules:e.getRules()},scopedSlots:e._u([{key:"default",fn:function(t){return[i("b-form-group",{attrs:{label:e.field.label}},[i("div",{staticClass:"fieldset-wrapper"},[i("div",{staticClass:"checkbox"},[i("b-form-checkbox-group",{on:{input:e.setValue},model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}},e._l(e.field.entity_form_settings.list_options,(function(t,n){return i("b-form-checkbox",{key:n,staticClass:"form-check",attrs:{value:t.value}},[i("div",[i("b-img",{attrs:{thumbnail:"",fluid:"",src:t.image_url,alt:"Image 1"}})],1),i("div",{staticClass:"mt-5"},[e._v(e._s(t.label))]),t.description.value&&""!==t.description.value?i("div",{staticClass:"mt-5 text-hover",domProps:{innerHTML:e._s(t.description.value)}}):e._e()])})),1)],1),t.errors?i("div",{staticClass:"text-danger my-2"},e._l(t.errors,(function(t,n){return i("small",{key:n,staticClass:"d-block"},[e._v(" "+e._s(t)+" ")])})),0):e._e()])])]}}])})],1)])},F=[],O={name:"drupal-list-string",props:{class_css:{type:[Array]},field:{type:Object,required:!0},model:{type:[Object],required:!0}},components:{ValidationProvider:p.d_},data:function(){return{selected:[]}},mounted:function(){this.getValue(),this.getImage()},methods:{getImage:function(){var e=this;this.field.entity_form_settings.list_options.forEach((function(t){t.image_url||e.$set(t,"image_url",""),t.image[0]&&""==t.image_url&&U.getImageUrl(t.image[0]).then((function(e){t.image_url=e.data}))}))},setValue:function(e){var t=[];e.forEach((function(e){t.push({value:e})})),this.$store.dispatch("renderByStep/setValue",{value:t,fieldName:this.field.name}),console.log(t," \n : ",e)},getRules:function(){return U.getRules(this.field)},getValue:function(){var e=this;this.model[this.field.name]&&this.model[this.field.name].length&&this.model[this.field.name].forEach((function(t){e.selected.push(t.value)}))}}},L=O,P=(0,g.Z)(L,R,F,!1,null,null,null),B=P.exports,I=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{class:e.class_css},[i("div",{domProps:{innerHTML:e._s(e.field.content)}})])},A=[],T={props:{class_css:{type:[Array]},field:{type:Object,required:!0}}},D=T,H=(0,g.Z)(D,I,A,!1,null,null,null),M=H.exports,U=(0,l.Z)((0,l.Z)({},d.Z),{},{getField:function(e){var t,i=e.type;switch("list_string"==i&&1==e.cardinality&&(i="boolean"),console.log(i),i){case"string":t=y;break;case"color_theme_field_type":t=w;break;case"boolean":t=q;break;case"list_string":t=B;break;case"render_html":t=M;break;case"text_long":t=M;break;default:break}return t},getImageUrl:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"medium";return this.get("/vuejs-entity/image/"+e+"/"+t)},getRules:function(e){var t={};if(e.constraints)for(var i in e.constraints)"NotNull"==i&&(t["required"]=!0);return t}}),z=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"d-flex justify-content-between align-items-center step-donneesite--submit mx-auto",attrs:{check_validation:e.check_validation}},[e.current_step&&!e.creation_running?i("b-button",{attrs:{variant:"secondary"},on:{click:e.previewStep}},[i("b-icon",{attrs:{icon:"arrow-left"}}),e._v(" Precedent ")],1):e._e(),e.count_step<e.steppers.length?i("b-button",{attrs:{variant:"primary",disabled:e.disabled||e.disable_submit},on:{click:e.nextStep}},[e._v(" Suivant "),i("b-icon",{attrs:{icon:"arrow-right"}})],1):e._e(),e.count_step>=e.steppers.length&&!e.finish_status?i("b-button",{attrs:{variant:"primary",disabled:e.creation_running},on:{click:e.create_site}},[e._v(" je cree mon site "),e.creation_running?e._e():i("b-icon",{staticClass:"ml-2",attrs:{icon:"check2","font-scale":"2"}}),e.creation_running?i("b-icon",{staticClass:"ml-2",attrs:{icon:"arrow-clockwise","font-scale":"2",animation:"spin"}}):e._e()],1):e._e()],1)},J=[],G=(i(26699),i(32023),{name:"next-preview",props:{validation_form:{type:Object,required:!0}},data:function(){return{disabled:!1}},mounted:function(){this.ajustStep()},computed:(0,l.Z)((0,l.Z)({},(0,c.rn)({creation_running:function(e){return e.creation_running},steppers:function(e){return e.renderByStep.steppers},current_step:function(e){return e.renderByStep.current_step},finish_status:function(e){return e.finish_status}})),{},{count_step:function(){return this.current_step+1},check_validation:function(){return!(!this.disabled||!this.validation_form.valid)&&(this.validationStep(),!0)},disable_submit:function(){var e=this.steppers[this.current_step];return!!(e&&e.templates&&e.templates.includes("page_register"))}}),methods:{nextStep:function(){this.validationStep()&&(this.$store.commit("renderByStep/nextStep"),this.$router.push({path:"/form-render/".concat(this.current_step)}))},previewStep:function(){this.$store.commit("renderByStep/previewStep"),this.$router.push({path:"/form-render/".concat(this.current_step)})},validationStep:function(){if(this.validation_form.valid)return this.disabled=!1,!0;this.validation_form.validate(),this.disabled=!0},ajustStep:function(){var e=parseInt(this.$route.params.idstep);parseInt(this.current_step)!==e&&e<=this.steppers.length&&this.$store.commit("renderByStep/nextStep",e)},create_site:function(){this.$store.dispatch("create_site")}}}),K=G,Q=(0,g.Z)(K,z,J,!1,null,null,null),W=Q.exports,X=i(69832),Y=i.n(X),ee=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"text-left"},[i("div",{staticClass:"accordion",attrs:{role:"tablist"}},e._l(e.buildFields(),(function(t,n){return i("b-card",{key:n,staticClass:"mb-1",attrs:{"no-body":""}},[i("b-card-header",{staticClass:"p-1",attrs:{"header-tag":"header",role:"tab"}},[i("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle",value:"accordion-"+n,expression:"'accordion-' + c"}],attrs:{block:"",variant:"info"},domProps:{innerHTML:e._s(t.title)}})],1),i("b-collapse",{attrs:{id:"accordion-"+n,visible:"",accordion:"my-accordion-layout-render",role:"tabpanel"}},[i("b-card-body",e._l(t.fields,(function(e,t){return i(e.template,{key:t,tag:"component",attrs:{field:e.field,fieldName:e.fieldName,key_config:e.key_config,class_css:[]}})})),1)],1)],1)})),1)])},te=[],ie=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{class:e.class_css},[i("b-form-group",{attrs:{label:e.field.text.label}},[i("b-form-input",{attrs:{name:e.fieldName},on:{input:e.input},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})],1)],1)},ne=[],se={name:"field-text",props:{class_css:{type:Array},fieldName:{type:String,required:!0},key_config:{type:String,required:!0},field:{type:Object,required:!0},sub_store:{type:String,default:"storeLayout"}},data:function(){return{value:this.field.text.value}},methods:{input:function(e){var t={key_config:this.key_config,fieldName:this.fieldName,type:"text",value:e};this.$store.commit(this.sub_store+"/setValue",t)}}},re=se,ae=(0,g.Z)(re,ie,ne,!1,null,null,null),le=ae.exports,oe=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{class:e.class_css},[i("b-form-group",{attrs:{label:e.field.text_html.label}},[i("ckeditor",{attrs:{config:e.editorConfig},model:{value:e.editorData,callback:function(t){e.editorData=t},expression:"editorData"}})],1)],1)},ue=[],ce={name:"textarea-layout",props:{class_css:{type:Array},fieldName:{type:String,required:!0},key_config:{type:String,required:!0},field:{type:Object,required:!0},sub_store:{type:String,default:"storeLayout"}},data:function(){return{editorData:this.field.text_html.value,editorConfig:{}}},methods:{input:function(e){var t={key_config:this.key_config,fieldName:this.fieldName,type:"text_html",value:e};this.$store.commit(this.sub_store+"/setValue",t)}}},de=ce,fe=(0,g.Z)(de,oe,ue,!1,null,null,null),me=fe.exports,pe={getTemplate:function(e){var t=null,i=Object.keys(e);switch(i[0]){case"text":t=le;break;case"text_html":t=me;break;default:break}return t}},_e={name:"layoutRenderHeader",computed:(0,l.Z)({},(0,c.rn)("storeLayout",{configuration:function(e){return e.configuration}})),methods:{buildFields:function(){var e=[];for(var t in this.configuration)if(this.configuration[t]["builder-form"]){var i=[];for(var n in this.configuration[t].fields)i.push({template:pe.getTemplate(this.configuration[t].fields[n]),field:this.configuration[t].fields[n],fieldName:n,key_config:t});e.push({title:this.configuration[t].info.title,fields:i})}return e}}},he=_e,ve=(0,g.Z)(he,ee,te,!1,null,null,null),ge=ve.exports,be=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"text-left"},[i("div",{staticClass:"accordion",attrs:{role:"tablist"}},e._l(e.buildFields(),(function(t,n){return i("b-card",{key:n,staticClass:"mb-1",attrs:{"no-body":""}},[i("b-card-header",{staticClass:"p-1",attrs:{"header-tag":"header",role:"tab"}},[i("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle",value:"accordion-"+n,expression:"'accordion-' + c"}],attrs:{block:"",variant:"info"},domProps:{innerHTML:e._s(t.title)}})],1),i("b-collapse",{attrs:{id:"accordion-"+n,visible:"",accordion:"my-accordion-layout-render",role:"tabpanel"}},[i("b-card-body",e._l(t.fields,(function(e,t){return i(e.template,{key:t,tag:"component",attrs:{field:e.field,fieldName:e.fieldName,key_config:e.key_config,sub_store:"storeLayoutFooter",class_css:[]}})})),1)],1)],1)})),1)])},ye=[],ke={name:"layoutRenderFooter",computed:(0,l.Z)({},(0,c.rn)("storeLayoutFooter",{configuration:function(e){return e.configuration}})),methods:{buildFields:function(){var e=[];for(var t in this.configuration)if(this.configuration[t]["builder-form"]){var i=[];for(var n in this.configuration[t].fields)i.push({template:pe.getTemplate(this.configuration[t].fields[n]),field:this.configuration[t].fields[n],fieldName:n,key_config:t});e.push({title:this.configuration[t].info.title,fields:i})}return e},saveLayout:function(){this.$store.dispatch("storeLayoutFooter/saveLayout")}}},xe=ke,Ce=(0,g.Z)(xe,be,ye,!1,null,null,null),Se=Ce.exports,$e=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("label",[e._v(" Veillez vous connecter, afin de sauvegarder vos données ")]),i("loginRegister",{attrs:{action_after_login:"emit_even"}})],1)},we=[],Ve=i(85570),Ee={name:"page-register",components:{loginRegister:Ve.z9},mounted:function(){this.check_if_user_connected()},methods:{ev_logingoogle:function(e){console.log(e)},check_if_user_connected:function(){var e=this;document.addEventListener("login_rx_vuejs__user_is_login",(function(){console.log("user login"),Ve.rC.getCurrentUser().then((function(t){e.$store.commit("SET_USER",t),e.$store.commit("renderByStep/nextStep")}))}),!1)}}},Ze=Ee,je=(0,g.Z)(Ze,$e,we,!1,null,null,null),Ne=je.exports,qe=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("label",[e._v(" Creer votre site maintenant !!! ")]),e._m(0),e.creation_running?i("div",{staticClass:"text-left mx-auto content-save-text"},[i("ul",{staticClass:"puce-step-vertical step-build"},e._l(e.build_steps,(function(t,n){return i("li",{key:n,class:["ok"==t.status?"active":"","error"==t.status?"text-danger":""]},[e._v(" "+e._s(t.titre)+" "),"run"==t.status?i("b-icon",{staticClass:"ml-auto",attrs:{icon:"three-dots","font-scale":"1.3",animation:"cylon",variant:"primary"}}):e._e(),"ok"==t.status?i("b-icon",{staticClass:"ml-auto",attrs:{icon:"check2","font-scale":"1.5",variant:"primary"}}):e._e()],1)})),0),e.finish_status?i("div",{staticClass:"my-5 h3 text-primary"},[e._v(" Votre site serra disponible d'ici 15 minutes "),e._m(1)]):e._e(),e.finish_status?i("div",{staticClass:"action d-flex flex-column"},[i("b-button",{on:{click:e.open_new_site}},[e._v(" Visiter votre nouveau site "),i("b-icon",{staticClass:"float-right",attrs:{icon:"award","font-scale":"1.3"}})],1),i("b-button",{on:{click:e.open_new_site_admin}},[e._v(" Administrer son contenu "),i("b-icon",{staticClass:"float-right",attrs:{icon:"folder-symlink","font-scale":"1.3"}})],1)],1):e._e(),e.finish_status?i("div",{staticClass:"my-5 h3"},[e._v(" Votre site web : "),i("a",{on:{click:e.open_new_site}},[i("b",[e._v(" "+e._s(e.new_hostname)+" ")])])]):e._e()]):e._e()])},Re=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("p",{staticClass:"step-donneesite--label"},[e._v(" Si votre contenu vous convient, cliquez sur le bouton "),i("b",[e._v(" 'Je cree mon site' ")]),e._v(". Vous pourriez le modifier à tout moment. ")])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("small",[i("i",{staticClass:"d-block"},[e._v(" (le temps de progagation des données DNS) ")])])}],Fe={name:"page-save",data:function(){return{}},computed:(0,l.Z)({},(0,c.rn)({build_steps:function(e){return e.build_steps},creation_running:function(e){return e.creation_running},finish_status:function(e){return e.finish_status},new_hostname:function(e){return e.new_hostname}})),methods:{open_new_site:function(){window.open(this.new_hostname,"_blank")},open_new_site_admin:function(){window.open(this.new_hostname+"/user","_blank")}}},Oe=Fe,Le=(0,g.Z)(Oe,qe,Re,!1,null,null,null),Pe=Le.exports;u().use(Y());var Be={name:"renderByStep",data:function(){return{fields:[]}},components:{nextPreviewVue:W,ValidationObserver:p._j},mounted:function(){},computed:(0,l.Z)((0,l.Z)({},(0,c.rn)("renderByStep",{form:function(e){return e.form},current_step:function(e){return e.current_step},model:function(e){return e.model},steppers:function(e){return e.steppers},running:function(e){return e.running}})),{},{get_running:function(){var e=Object.keys(this.form);return e.length&&(console.log("get_running"),this.buildFields()),this.running}}),methods:{buildFields:function(){var e=this;this.fields=[];var t=this.steppers[this.current_step],i=!0;if(t.states&&t.states.length){var n=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(t.states[e])return t.states[e]},s=n(0);console.log("sate :",s),"check_user_login"==s.custom&&this.$store.state.user&&this.$store.state.user.uid&&this.$store.state.user.uid[0]&&(i=!1)}return i?(t.keys&&t.keys.length&&(console.log("buildFields"),t.keys.forEach((function(t){e.form[t]&&(e.model[t]?e.fields.push({template:U.getField(e.form[t]),field:e.form[t],model:e.model}):e.fields.push({template:U.getField(e.form[t]),field:e.form[t]}))}))),t.templates&&t.templates.length&&(console.log("buildFields template"),t.templates.forEach((function(t){"layout_entete"==t?e.fields.push({template:ge,field:{}}):"layout_footer"==t?e.fields.push({template:Se,field:{}}):"page_register"==t?e.fields.push({template:Ne,field:{}}):"page_save"==t&&e.fields.push({template:Pe,field:{}})}))),this.fields):(this.$store.commit("renderByStep/nextStep"),void this.$router.push({path:"/form-render/".concat(this.current_step)}))}}},Ie=Be,Ae=(0,g.Z)(Ie,r,a,!1,null,null,null),Te=Ae.exports,De=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},He=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"about"},[i("h1",[e._v("This is an about page")])])}],Me={},Ue=(0,g.Z)(Me,De,He,!1,null,null,null),ze=Ue.exports,Je={data:function(){return{render_template:null,type_render:"by-step"}},name:"formRender",mounted:function(){this.getRender()},methods:{getRender:function(){switch(this.type_render){case"by-step":this.render_template=Te;break;default:this.render_template=ze;break}}}},Ge=Je,Ke=(0,g.Z)(Ge,n,s,!1,null,null,null),Qe=Ke.exports}}]);
//# sourceMappingURL=EntityDrupal.umd.min.235.js.map