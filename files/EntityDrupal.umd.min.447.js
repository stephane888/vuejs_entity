"use strict";(("undefined"!==typeof self?self:this)["webpackChunkEntityDrupal"]=("undefined"!==typeof self?self:this)["webpackChunkEntityDrupal"]||[]).push([[447],{47447:function(e,t,s){s.r(t),s.d(t,{default:function(){return X}});var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("ValidationObserver",{ref:"formValidate",attrs:{tag:"form"}},[s("div",{staticClass:"login-page"},[e.alertDisplay?s("div",{staticClass:"alert w-100",class:e.alertType,attrs:{role:"alert"},domProps:{innerHTML:e._s(e.alertText)}}):e._e(),e.isBusy?s("div",{staticClass:"spinner-grow text-primary",staticStyle:{width:"3rem",height:"3rem"},attrs:{role:"status"}},[s("span",{staticClass:"sr-only"},[e._v("Chargement ...")])]):e._e(),s("transition",{attrs:{name:"customslide"}},[s("div",{staticClass:"block-center"},[s(e.stepe,{tag:"component",attrs:{urlLogo:e.urlLogo,formValidate:e.formValidate,"action-after-login":e.actionAfterLogin,"model-register-form":e.modelRegisterForm,"show-password":e.showPassword,"action-after-register":e.actionAfterRegister,"show-modal-success":e.showModalSuccess},on:{"select-stepe":e.selectStepe}})],1)])],1),s("div",{staticClass:"politik-secur mx-auto text-center"},[e._t("condition_utilisation",(function(){return[s("p",{staticClass:"text-white"},[e._v(" En vous inscrivant, vous acceptez nos "),s("a",{attrs:{href:"#"}},[e._v(" Conditions d'utilisation ")]),e._v(" , de recevoir des emails et des MAJ de LESROISDELARENO et vous reconnaissez avoir lu notre "),s("a",{attrs:{href:"#"}},[e._v(" Politique de confidentialité")])])]}))],2)])},r=[],o=s(22030),a=(s(74854),s(62537)),i=(s(97330),s(12220),s(77203)),l=s.n(i),c=s(40756),u={AfterRedirect:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"reload",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;console.log("AfterRedirect action .",e);var n=null;if("redirect"==e&&t);else if("home"==e)window.location.assign("/");else if("reload"==e)window.location.reload();else if("emit_even"==e){var r=new CustomEvent("login_rx_vuejs__user_is_login");document.dispatchEvent(r)}else if("emit_even_register"==e){r=new CustomEvent("login_rx_vuejs__user_is_register");document.dispatchEvent(r)}else"default"==e&&(s.reponse&&s.reponse.config.url!==s.reponse.request.responseURL?window.location.assign(s.reponse.request.responseURL):s.data&&s.data.createuser?n="final-gl-register":s.data&&window.location.reload());return n}},d=s(1730),m=new(l()),f=(0,a.Z)((0,a.Z)({},u),{},{messages:{log_email:"Email ou Nom d'utilisateur",pass:"Mot de passe",login:"Nom d'utilisateur",mail:"Email",submit:{first:"Suivant",connect:"Connexion",register:"S'inscrire",final:"terminée"},devis_create_user:"Votre compte a été creer sur <a href='/'> lesroisdelareno.fr </a>. <br> <strong> Bien vouloir verifier votre boite mail afin de valider votre compte </strong>"},modalSuccess:function(e,t){return c.Ht.modalSuccess(e,t)},msgCreate:function(e){var t=m.$createElement,s=[];for(var n in e)s.push(t("p",{domProps:{innerHTML:e[n]},style:{lineHeight:"25px",fontSize:"17px",padding:"15px 15px 0px",margin:0}},[]));return t("div",{},[s])},connexionUser:function(e,t){var s=this;return new Promise((function(n,r){var o="/login-rx-vuejs/user-connexion";d.Z.post(o,e).then((function(e){s.AfterRedirect(t,null,e),n(e)}))})).catch((function(e){reject(e)}))}}),g=s(4962),p={user:{},FB:null,appId:"",scope:"public_profile, email",version:"v11.0",openPopup:function(){var e=this,t=this;window.FB.login((function(t){e.statusChangeCallback(t,!0)}),{scope:t.scope,return_scopes:!0})},logOut:function(){window.FB.logout((function(e){this.onLogOut(e)}))},onLogOut:function(e){console.log("Déconnetion réussi",e)},statusChangeCallback:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.user=e,t){var s=new CustomEvent("wbu-fb-status-change");document.dispatchEvent(s)}console.log("status",this.user)},getUserStatus:function(){var e=this;window.FB.getLoginStatus((function(t){e.statusChangeCallback(t)}))},chargement:function(){var e=this,t=document.getElementsByTagName("head")[0],s=document.createElement("script");t.appendChild(s),s.id="facebook-jssdk-021",s.onload=function(){function t(){window.FB?(e.FB=window.FB,e.FB.init({appId:e.appId,cookie:!0,xfbml:!0,version:e.version,statue:!1}),console.log("Chargement du JS facebook"),e.getUserStatus()):(console.log("facebook not load"),setTimeout((function(){t()}),900))}t()},s.src="https://connect.facebook.net/en_US/sdk.js"}},v=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"content-center"},[s("a",{staticClass:"content-center__img",attrs:{href:"/"}},[s("img",{staticClass:"img-fluid",attrs:{src:e.urlLogo,alt:""}})]),s("h4",{staticClass:"title"},[e._v("Connectez vous avec")]),s("div",{staticClass:"content-center__btn-column"},[s("logingoogle",{attrs:{idHtml:"default"}}),s("div",{staticClass:"btn-login btn-login--facebook",on:{click:e.loginFacebook}},[s("span",{staticClass:"btn-login__icon icon-facebook"}),s("i",{staticClass:"btn-login__text"},[e._v(" Facebook ")]),"facebook"===e.waiting?s("svgWaiting"):e._e()],1)],1),s("strong",{staticClass:"d-block"},[e._v(" Ou ")]),s("hr",{staticClass:"diviseur"}),s("h3",{staticClass:"content-center__title"},[e._v(e._s(e.messages.log_email))]),s("div",{staticClass:"form-group content-center__input"},[s("ValidationProvider",{attrs:{name:"name",rules:"required"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("input",{directives:[{name:"model",rawName:"v-model",value:e.form.name[0].value,expression:"form.name[0].value"}],staticClass:"form-control",attrs:{type:"text",name:"name"},domProps:{value:e.form.name[0].value},on:{input:function(t){t.target.composing||e.$set(e.form.name[0],"value",t.target.value)}}}),s("div",{staticClass:"text-danger text-small"},e._l(t.errors,(function(t,n){return s("small",{key:n,staticClass:"d-block"},[e._v(" "+e._s(t)+" ")])})),0)]}}])})],1),s("div",{staticClass:"content-center__btn"},[s("div",{staticClass:"btn-login btn-login--connexion",on:{click:e.checkUserStatus}},[s("span",{staticClass:"btn-login__text"},[e._v(" "+e._s(e.messages.submit.first)+" ")]),"wait"===e.waiting?s("svgWaiting"):e._e()],1)])])},h=[],_=(s(45885),s(86587),s(57085),function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"buttton-google-aouth",class:e.classRender,attrs:{id:e.idHtmlrender}})}),w=[],b={userAccess:{},client_id:"513247959752-qapd9jb30pdtoh51m0h53070a2v8c4er.apps.googleusercontent.com"};function x(e){return new Promise((function(t){var s=document.createElement("script");s.setAttribute("src",e),s.onload=function(){console.log(" Chargement du script ok : ",e),t(!0)},document.head.appendChild(s)}))}var C={name:"LoginGoogle",props:{idHtml:{type:String,required:!0},returnUidInfo:{type:Boolean,default:!1},classRender:{type:Array,default:function(){return["mx-auto"]}},actionAfterLogin:{type:String,default:"default"}},computed:{idHtmlrender:function(){return"google-login-tab"+this.idHtml}},mounted:function(){var e=this;window.google?this.getUserInfoFromFrame():x("https://accounts.google.com/gsi/client").then((function(){e.getUserInfoFromFrame()}))},methods:{getUserInfoFromFrame:function(){var e=this;function t(t){console.log("Encoded JWT ID token: ",t),b.userAccess=(0,a.Z)((0,a.Z)({},t),{},{client_id:t.clientId}),e.TryToLoginWithGoogle(),window.rxGoogle=b}console.log(" window.onload ! ",window.onload);var s=function(){window.google.accounts.id.initialize({client_id:b.client_id,callback:t}),window.google.accounts.id.renderButton(document.getElementById(e.idHtmlrender),{theme:"outline",size:"large"}),window.google.accounts.id.prompt()};s()},TryToLoginWithGoogle:function(){var e=this;return new Promise((function(t,s){d.Z.post("/login-rx-vuejs/google-check",b.userAccess).then((function(s){e.isBusy=!1,e.alertDisplay=!0,e.alertType="alert-success",e.alertText="Connexion réussie",e.$emit("ev_logingoogle",s.data),e.returnUidInfo||u.AfterRedirect(e.actionAfterLogin,null,s),t(s)})).catch((function(t){e.isBusy=!1,e.alertDisplay=!0,e.alertType="alert-danger",e.alertText="Google : Erreur de connexion",t.error&&t.error.statusText&&""!=t.error.statusText&&(e.alertText=t.error.statusText),console.log(" Error ajax ",t.error),console.log(" Error ajax ",t.code),console.log(" Error ajax ",t.stack),s(t)}))}))}}},y=C,k=s(1001),R=(0,k.Z)(y,_,w,!1,null,null,null),S=R.exports,E=s(25190),L={name:"CheckStatus",components:{svgWaiting:function(){return s.e(415).then(s.bind(s,18415))},logingoogle:S},props:{urlLogo:{type:String,required:!0},formValidate:{type:Object,required:!0}},data:function(){return{messages:f.messages,waiting:""}},computed:(0,a.Z)({},(0,E.rn)(["form"])),methods:{loginFacebook:function(){this.waiting="facebook",p.openPopup()},logOutFacebook:function(){p.logOut()},checkUserStatus:function(){var e=this;return(0,o.Z)(regeneratorRuntime.mark((function t(){var s,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.waiting="wait",s="/login-rx-vuejs/check-user-status",t.next=4,e.formValidate.validate();case 4:n=t.sent,n?d.Z.post(s,e.form).then((function(t){e.waiting="",t.data?e.$emit("select-stepe","setPassword"):e.$emit("select-stepe","register")})):e.waiting="";case 6:case"end":return t.stop()}}),t)})))()}}},F=L,T=(0,k.Z)(F,v,h,!1,null,null,null),P=T.exports,B=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"content-center"},[s("a",{staticClass:"content-center__img",attrs:{href:"/"}},[s("img",{attrs:{src:e.urlLogo,alt:""}})]),s("h3",{staticClass:"content-center__title"},[e._v(e._s(e.messages.pass))]),s("div",{staticClass:"form-group content-center__input"},[s("ValidationProvider",{ref:"refPass",attrs:{name:"pass",rules:"required"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.form.pass?s("input",{directives:[{name:"model",rawName:"v-model",value:e.form.pass[0].value,expression:"form.pass[0].value"}],staticClass:"form-control",attrs:{type:"password",name:"pass"},domProps:{value:e.form.pass[0].value},on:{input:function(t){t.target.composing||e.$set(e.form.pass[0],"value",t.target.value)}}}):e._e(),s("div",{staticClass:"text-danger text-small"},e._l(t.errors,(function(t,n){return s("small",{key:n,staticClass:"d-block"},[e._v(" "+e._s(t)+" ")])})),0)]}}])})],1),s("a",{staticClass:"content-center__forgot-pass",attrs:{href:"/user/password"}},[e._v(" Mot de passe oublié ? ")]),s("div",{staticClass:"content-center__btn"},[s("div",{staticClass:"btn-login btn-login--connexion",on:{click:e.Login}},[s("span",{staticClass:"btn-login__text"},[e._v(" "+e._s(e.messages.submit.connect)+" ")]),"wait"==e.waiting?s("svgWaiting"):e._e()],1)]),s("hr"),s("a",{staticClass:"text-center d-block",attrs:{href:"#"},on:{click:function(t){return e.$emit("select-stepe","checkstatus")}}},[e._v(" Retour ")])])},Z=[],A={name:"SetPassword",components:{svgWaiting:function(){return s.e(415).then(s.bind(s,18415))}},props:{urlLogo:{type:String,required:!0},formValidate:{type:Object,required:!0},actionAfterLogin:{type:String,required:!0}},data:function(){return{messages:f.messages,waiting:""}},computed:(0,a.Z)({},(0,E.rn)(["form"])),mounted:function(){void 0===this.form.pass&&this.$set(this.form,"pass",[{value:""}])},methods:{Login:function(){var e=this;return(0,o.Z)(regeneratorRuntime.mark((function t(){var s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.waiting="wait",t.next=3,e.formValidate.validate();case 3:s=t.sent,setTimeout((function(){s?f.connexionUser(e.form,e.actionAfterLogin).then((function(){e.waiting=""})).catch((function(t){e.$refs.refPass.setErrors([t.error.statusText]),e.waiting="error"})):e.waiting=""}),3e3);case 5:case"end":return t.stop()}}),t)})))()}}},$=A,q=(0,k.Z)($,B,Z,!1,null,null,null),V=q.exports,U=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"content-center"},[s("a",{staticClass:"content-center__img",attrs:{href:"/"}},[s("img",{attrs:{src:e.urlLogo,alt:""}})]),"default"===e.modelRegisterForm?s("div",[s("h3",{staticClass:"content-center__title"},[e._v(e._s(e.messages.login))]),s("div",{staticClass:"form-group content-center__input"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.form.name[0].value,expression:"form.name[0].value"}],staticClass:"form-control",attrs:{type:"text",readonly:"true",name:"name"},domProps:{value:e.form.name[0].value},on:{input:function(t){t.target.composing||e.$set(e.form.name[0],"value",t.target.value)}}})]),e.showPassword?s("h3",{staticClass:"content-center__title"},[e._v(" "+e._s(e.messages.pass)+" ")]):e._e(),e.showPassword?s("div",{staticClass:"form-group content-center__input"},[e.form.pass?s("input",{directives:[{name:"model",rawName:"v-model",value:e.form.pass[0].value,expression:"form.pass[0].value"}],staticClass:"form-control",attrs:{type:"password",name:"pass"},domProps:{value:e.form.pass[0].value},on:{input:function(t){t.target.composing||e.$set(e.form.pass[0],"value",t.target.value)}}}):e._e()]):e._e(),s("h3",{staticClass:"content-center__title"},[e._v(e._s(e.messages.mail))]),s("ValidationProvider",{ref:"mail",staticClass:"d-block w-100",attrs:{name:"mail",rules:"required"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("div",{staticClass:"form-group content-center__input"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.form.mail[0].value,expression:"form.mail[0].value"}],staticClass:"form-control",attrs:{type:"mail",name:"mail"},domProps:{value:e.form.mail[0].value},on:{input:function(t){t.target.composing||e.$set(e.form.mail[0],"value",t.target.value)}}})]),s("div",{staticClass:"text-danger text-small"},e._l(t.errors,(function(t,n){return s("small",{key:n,staticClass:"d-block"},[e._v(" "+e._s(t)+" ")])})),0)]}}],null,!1,3187930093)}),e._l(e.templates,(function(t,n){return s("ValidationProvider",{key:n,ref:t.ref,refInFor:!0,staticClass:"d-block w-100",scopedSlots:e._u([{key:"default",fn:function(n){return[s(t,{tag:"component"}),s("div",{staticClass:"text-danger text-small"},e._l(n.errors,(function(t,n){return s("small",{key:n,staticClass:"d-block"},[e._v(" "+e._s(t)+" ")])})),0)]}}],null,!0)})})),s("div",{staticClass:"content-center__btn"},[s("div",{staticClass:"btn-login btn-login--connexion",on:{click:e.RegisterDefault}},[s("span",{staticClass:"btn-login__text"},[e._v(" "+e._s(e.messages.submit.register)+" ")]),"wait"==e.waiting?s("svgWaiting"):e._e()],1)]),s("hr")],2):e._e(),"generate_password"===e.modelRegisterForm?s("div",[s("h4",{staticClass:"title"},[e._v("Creation automatique du compte")]),s("p",{staticClass:"mb-4"},[e._v(" Vos informations de connexion seront transferés à cette adresse. ")]),e.validEmail(e.form.name[0].value)?s("div",{staticClass:"mb-5"},[s("strong",[e._v(" "+e._s(e.form.name[0].value)+" ")]),e._v(" "+e._s(e.set_email())+" ")]):e._e(),e.validEmail(e.form.name[0].value)?e._e():s("div",[s("ValidationProvider",{ref:"mail",staticClass:"d-block w-100",attrs:{name:"mail",rules:"required"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("div",{staticClass:"form-group content-center__input"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.form.mail[0].value,expression:"form.mail[0].value"}],staticClass:"form-control",attrs:{type:"mail",name:"mail"},domProps:{value:e.form.mail[0].value},on:{input:function(t){t.target.composing||e.$set(e.form.mail[0],"value",t.target.value)}}})]),s("div",{staticClass:"text-danger text-small"},e._l(t.errors,(function(t,n){return s("small",{key:n,staticClass:"d-block"},[e._v(" "+e._s(t)+" ")])})),0)]}}],null,!1,3187930093)})],1),s("div",{staticClass:"content-center__btn"},[s("div",{staticClass:"btn-login btn-login--connexion",on:{click:e.generatePassword}},[s("span",{staticClass:"btn-login__text"},[e._v(" "+e._s(e.messages.submit.register)+" ")]),"wait"==e.waiting?s("svgWaiting"):e._e()],1)])]):e._e(),s("b-alert",{attrs:{dismissible:"",variant:"danger",fade:"",show:!!e.error.message},on:{dismissed:function(t){e.error.message=!1}}},[e._v(" "+e._s(e.error.message)+" ")]),s("a",{staticClass:"text-center d-block",attrs:{href:"#"},on:{click:function(t){return e.$emit("select-stepe","checkstatus")}}},[e._v(" Retour ")])],1)},j=[],I=(s(33773),s(33117),s(49526),s(30825),s(87330),s(93995)),D=s(86017),O=(s(55090),s(87544),{modelsFields:{},string:function(e,t){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];0===s.length&&s.push({value:""});var n=[];n.push(e("label",{class:["d-block","content-center__title"]},[t.label_value])),s.forEach((function(t){n.push(e("input",{props:{type:"text",value:t.value,b_input:{type:Object,required:!0}},on:{input:function(e){e.target&&e.target.value&&(t.value=e.target.value)}},class:["form-control"]}))})),n.push(e("small",{class:["text-muted"]},[t.description]));var r=e("div",{props:{},class:["form-group","content-center__input"]},n);return r}}),W=function(){function e(t,s){(0,I.Z)(this,e),this.entity=t,this.bundle=s}return(0,D.Z)(e,[{key:"format",value:function(){var e=(0,o.Z)(regeneratorRuntime.mark((function e(){var t,s=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getFields();case 2:return t=e.sent,e.abrupt("return",new Promise((function(e,n){if(t.data&&t.data.fields){O.modelsFields=s.buildModel(t.data.fields);var r=[],o=function(e){r.push({ref:e,props:{name:{type:String,default:t.data.fields[e].name}},render:function(s){var n=[];switch(t.data.fields[e].type){case"string":n.push(O.string(s,t.data.fields[e],O.modelsFields[e]));break}return s("div",n)}})};for(var a in t.data.fields)o(a);e({templates:r,models:O.modelsFields})}else n("Aucune donnée disponible")})));case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getFields",value:function(){var e="/api/form-node/generate-form";return"user"===this.entity&&(e="/api/form-node/generate-user"),e+="/"+this.bundle,d.Z.get(e)}},{key:"buildModel",value:function(e){var t={};for(var s in e)e[s].type&&(t[s]=[]);return t}}]),e}(),M=W,H={name:"RegisTer",components:{svgWaiting:function(){return s.e(415).then(s.bind(s,18415))}},props:{urlLogo:{type:String,required:!0},formValidate:{type:Object,required:!0},showPassword:{type:Boolean,default:!1},actionAfterRegister:{type:String,required:!0},modelRegisterForm:{type:String,required:!0},showModalSuccess:{type:Boolean,required:!0}},data:function(){return{messages:f.messages,waiting:"",templates:[],error:{message:!1}}},computed:(0,a.Z)({},(0,E.rn)(["form"])),mounted:function(){this.showPassword?void 0===this.form.pass&&this.$set(this.form,"pass",[{value:""}]):this.form.pass&&delete this.form.pass,this.getFields()},methods:{generatePassword:function(){var e=this;return(0,o.Z)(regeneratorRuntime.mark((function t(){var s,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.waiting="wait",s="/login-rx-vuejs/genrate-password",t.next=4,e.formValidate.validate();case 4:n=t.sent,n?d.Z.post(s,e.form).then((function(t){console.log("resp : ",t),e.waiting="",f.AfterRedirect(e.actionAfterRegister,null,t)})).catch((function(){e.waiting=""})):(e.waiting="",console.log("echec de validation de mail"));case 6:case"end":return t.stop()}}),t)})))()},RegisterDefault:function(){var e=this;return(0,o.Z)(regeneratorRuntime.mark((function t(){var s,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.waiting="wait",s="/user/register?_format=json",t.next=4,e.formValidate.validate();case 4:n=t.sent,n?d.Z.post(s,e.form).then((function(t){e.waiting="",e.showModalSuccess?f.modalSuccess(f.msgCreate([e.messages.devis_create_user]),{title:"Votre compte a été crré",footerClass:"d-none",headerBgVariant:"success",headerTextVariant:"light"}).then((function(){f.AfterRedirect(e.actionAfterRegister,null,t)})):f.AfterRedirect(e.actionAfterRegister,null,t)})).catch((function(t){if(e.waiting="",console.log("catch : ",t),t.error.data&&t.error.data.message&&(e.error.message=t.error.data.message),t.error&&t.error.data&&t.error.data.errors){var s=t.error.data.errors;s.forEach((function(t){var s=t.split(":");e.$refs[s[0]]&&(e.$refs[s[0]][0]?e.$refs[s[0]][0].setErrors([s[1]]):e.$refs[s[0]].setErrors([s[1]]))}))}})):e.waiting="";case 6:case"end":return t.stop()}}),t)})))()},getFields:function(){var e=this,t=new M("user","user");t.format().then((function(t){for(var s in e.templates=t.templates,t.models)e.$set(e.form,s,t.models[s]);console.log("resp : ",t)}))},validEmail:function(e){var t=/\S+@\S+\.\S+/;return t.test(e)},set_email:function(){this.form.mail=this.form.name}}},N=H,z=(0,k.Z)(N,U,j,!1,null,null,null),G=z.exports,J={name:"LoginRegister",props:{actionAfterLogin:{type:String,default:"default"},actionAfterRegister:{type:String,default:"default"},modelRegisterForm:{type:String,default:"default"},showPassword:{type:Boolean,default:!0},showModalSuccess:{type:Boolean,default:!0}},data:function(){return{messages:f.messages,waiting:"",stepe:P,models:{},baseURl:g.Z.baseURl,isBusy:!1,alertDisplay:!1,alertType:"alert-danger",alertText:"",urlLogo:window.location.origin+""+window.logo_current_theme,formValidate:{}}},mounted:function(){p.appId=889256191665205,this.TryToLoginWithFacebook(),p.chargement(),this.formValidate=this.$refs.formValidate},methods:{selectStepe:function(e){switch(e){case"checkstatus":this.stepe=P;break;case"setPassword":this.stepe=V;break;case"register":this.stepe=G;break}},TryToLoginWithFacebook:function(){var e=this;document.addEventListener("wbu-fb-status-change",(function(){e.isBusy=!0,e.getFields(),d.Z.post("/login-rx-vuejs/facebook-check",p.user).then((function(t){e.isBusy=!1,e.alertDisplay=!0,e.alertType="alert-success",e.alertText=" Connexion réussie  ",t.reponse&&t.reponse.config.url!==t.reponse.request.responseURL?window.location.assign(t.reponse.request.responseURL):t.data&&t.data.createuser?e.stepe="final-fb-register":window.location.assign(window.location.origin)})).catch((function(t){e.isBusy=!1,e.isBusy=!1,e.alertDisplay=!0,e.alertType="alert-danger",e.alertText="Facebook : Erreur de connexion ",t.error&&(e.alertText=t.error.statusText)}))}),!1)},IsBusy:function(){this.isBusy=!0,console.log("this.isbusy",this.isBusy)},finalRegister:function(){var e=this;return(0,o.Z)(regeneratorRuntime.mark((function t(){var s,n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.waiting="wait",s={},n="","final-gl-register"===e.stepe?(n="/login-rx-vuejs/google-login",s={fields:e.models,google:[]}):"final-fb-register"===e.stepe&&(n="/login-rx-vuejs/facebook-login",s={fields:e.models,facebook:p.user}),t.next=6,e.$refs.formValidate.validate();case 6:r=t.sent,r&&d.Z.post(n,s).then((function(t){console.log(t),e.waiting="",t.reponse&&t.reponse.config.url!==t.reponse.request.responseURL&&window.location.assign(t.reponse.request.responseURL)}));case 8:case"end":return t.stop()}}),t)})))()},connexionUser:function(e){return f.connexionUser(e,this.actionAfterLogin)}}},K=J,Q=(0,k.Z)(K,n,r,!1,null,null,null),X=Q.exports}}]);
//# sourceMappingURL=EntityDrupal.umd.min.447.js.map