"use strict";(("undefined"!==typeof self?self:this)["webpackChunkEntityDrupal"]=("undefined"!==typeof self?self:this)["webpackChunkEntityDrupal"]||[]).push([[309],{79309:function(t,e,n){n.r(e),n.d(e,{default:function(){return h}});var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("b-button",{attrs:{variant:"info"},on:{click:t.duplicateEntities}},[t._v(" duplicate entities ")]),n("div",[t._v("numbersEntities: "+t._s(t.numbersEntities))])],1)},o=[],s=n(36608),a=n(62537),c=(n(41539),n(88674),n(47941),n(91555)),l={name:"TextDuplicateEntities",data:function(){return{payload:{id:139,content:{name:[{value:"Bienvenue chez test"}],field_domain_access:[{target_id:"test328_wb_horizon_kksa"}],field_domain_source:[{target_id:"test328_wb_horizon_kksa"}],is_default_theme:[{value:!1}]}}}},computed:(0,a.Z)((0,a.Z)({},(0,c.rn)(["entityDuplicate"])),(0,c.Se)(["numbersEntities"])),mounted:function(){},methods:{duplicateEntities:function(){var t=this;this.$store.dispatch("getMatriceEntities",this.payload).then((function(){t.prepareSaveEntities(t.$store.state)}))},prepareSaveEntities:function(t){var e=this,n=function t(n,o){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return new Promise((function(a,c){if(console.log("loopItem : ",n),n[o]){var l=n[o];if(n[o].entities){var u=Object.keys(n[o].entities);i(n[o].entities,u[0],n[o].entity,u,0).then((function(i){e.$store.dispatch("saveEntity",{entity_type_id:n[o].target_type,value:i,index:o}).then((function(e){s.push({target_id:e.data.id}),o+=1,o<n.length?a(t(n,o,s)):a(s)})).catch((function(t){console.log(" catch : ",t),c(t)}))}))}else e.$store.dispatch("saveEntity",{entity_type_id:l.target_type,value:l.entity,index:o}).then((function(e){s.push({target_id:e.data.id}),o+=1,n.length<=o?a(t(n,o,s)):a(s)})).catch((function(t){console.log("catch : ",t),c(t)}))}else a(s)}))},i=function t(e,i,o,s,a){return new Promise((function(c){console.log("loopFieldEntity : ",e),e[i]&&e[i].length>0?n(e[i],0).then((function(n){console.log("loopFieldEntity result of loopItem : ",n),o[i]=n,a+=1,s.length>a?c(t(e,s[a],o,s,a)):c(o)})):c(o)}))},o=function t(n){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return new Promise((function(c,l){if(console.log("loopEntityPromise : ",n),n[o])if(n[o].entities&&"object"===(0,s.Z)(n[o].entities)){var u=Object.keys(n[o].entities);i(n[o].entities,u[0],n[o].entity,u,0).then((function(i){console.log(" loopEntityPromise SEND with override entity : ",i),e.$store.dispatch("saveEntity",{entity_type_id:n[o].target_type,value:i,index:o}).then((function(e){a.push({target_id:e.data.id}),o+=1,o<n.length?c(t(n,o)):c(a)})).catch((function(t){console.log("catch : ",t),l(t)}))}))}else e.$store.dispatch("saveEntity",{entity_type_id:n[o].target_type,value:n[o].entity,index:o}).then((function(e){a.push({target_id:e.data.id}),o+=1,o<n.length?c(t(n,o)):c(a)})).catch((function(t){console.log("catch : ",t),l(t)}));else console.log(" loopEntityPromise END "),c([])}))};o(t.entityDuplicate,0)}}},u=l,r=n(1001),d=(0,r.Z)(u,i,o,!1,null,null,null),h=d.exports}}]);
//# sourceMappingURL=EntityDrupal.umd.min.309.js.map