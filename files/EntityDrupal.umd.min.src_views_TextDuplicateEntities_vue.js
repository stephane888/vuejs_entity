"use strict";
/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
((typeof self !== 'undefined' ? self : this)["webpackChunkEntityDrupal"] = (typeof self !== 'undefined' ? self : this)["webpackChunkEntityDrupal"] || []).push([["src_views_TextDuplicateEntities_vue"],{

/***/ "./src/views/TextDuplicateEntities.vue":
/*!*********************************************!*\
  !*** ./src/views/TextDuplicateEntities.vue ***!
  \*********************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _TextDuplicateEntities_vue_vue_type_template_id_69faaa16___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./TextDuplicateEntities.vue?vue&type=template&id=69faaa16& */ \"./src/views/TextDuplicateEntities.vue?vue&type=template&id=69faaa16&\");\n/* harmony import */ var _TextDuplicateEntities_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./TextDuplicateEntities.vue?vue&type=script&lang=js& */ \"./src/views/TextDuplicateEntities.vue?vue&type=script&lang=js&\");\n/* harmony import */ var _node_modules_vue_vue_loader_v15_lib_runtime_componentNormalizer_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! !../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js */ \"./node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\");\n\n\n\n\n\n/* normalize component */\n;\nvar component = (0,_node_modules_vue_vue_loader_v15_lib_runtime_componentNormalizer_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(\n  _TextDuplicateEntities_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_1__[\"default\"],\n  _TextDuplicateEntities_vue_vue_type_template_id_69faaa16___WEBPACK_IMPORTED_MODULE_0__.render,\n  _TextDuplicateEntities_vue_vue_type_template_id_69faaa16___WEBPACK_IMPORTED_MODULE_0__.staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (false) { var api; }\ncomponent.options.__file = \"src/views/TextDuplicateEntities.vue\"\n/* harmony default export */ __webpack_exports__[\"default\"] = (component.exports);\n\n//# sourceURL=webpack://EntityDrupal/./src/views/TextDuplicateEntities.vue?");

/***/ }),

/***/ "./src/views/TextDuplicateEntities.vue?vue&type=template&id=69faaa16&":
/*!****************************************************************************!*\
  !*** ./src/views/TextDuplicateEntities.vue?vue&type=template&id=69faaa16& ***!
  \****************************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"render\": function() { return /* reexport safe */ _node_modules_vue_vue_loader_v15_lib_loaders_templateLoader_js_vue_loader_options_node_modules_vue_vue_loader_v15_lib_index_js_vue_loader_options_TextDuplicateEntities_vue_vue_type_template_id_69faaa16___WEBPACK_IMPORTED_MODULE_0__.render; },\n/* harmony export */   \"staticRenderFns\": function() { return /* reexport safe */ _node_modules_vue_vue_loader_v15_lib_loaders_templateLoader_js_vue_loader_options_node_modules_vue_vue_loader_v15_lib_index_js_vue_loader_options_TextDuplicateEntities_vue_vue_type_template_id_69faaa16___WEBPACK_IMPORTED_MODULE_0__.staticRenderFns; }\n/* harmony export */ });\n/* harmony import */ var _node_modules_vue_vue_loader_v15_lib_loaders_templateLoader_js_vue_loader_options_node_modules_vue_vue_loader_v15_lib_index_js_vue_loader_options_TextDuplicateEntities_vue_vue_type_template_id_69faaa16___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! -!../../node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./TextDuplicateEntities.vue?vue&type=template&id=69faaa16& */ \"./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/views/TextDuplicateEntities.vue?vue&type=template&id=69faaa16&\");\n\n\n//# sourceURL=webpack://EntityDrupal/./src/views/TextDuplicateEntities.vue?");

/***/ }),

/***/ "./src/views/TextDuplicateEntities.vue?vue&type=script&lang=js&":
/*!**********************************************************************!*\
  !*** ./src/views/TextDuplicateEntities.vue?vue&type=script&lang=js& ***!
  \**********************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _node_modules_babel_loader_lib_index_js_clonedRuleSet_120_0_rules_0_use_0_node_modules_vue_vue_loader_v15_lib_index_js_vue_loader_options_TextDuplicateEntities_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! -!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-120[0].rules[0].use[0]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./TextDuplicateEntities.vue?vue&type=script&lang=js& */ \"./node_modules/babel-loader/lib/index.js??clonedRuleSet-120[0].rules[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/views/TextDuplicateEntities.vue?vue&type=script&lang=js&\");\n /* harmony default export */ __webpack_exports__[\"default\"] = (_node_modules_babel_loader_lib_index_js_clonedRuleSet_120_0_rules_0_use_0_node_modules_vue_vue_loader_v15_lib_index_js_vue_loader_options_TextDuplicateEntities_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0__[\"default\"]); \n\n//# sourceURL=webpack://EntityDrupal/./src/views/TextDuplicateEntities.vue?");

/***/ }),

/***/ "./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/views/TextDuplicateEntities.vue?vue&type=template&id=69faaa16&":
/*!*************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/views/TextDuplicateEntities.vue?vue&type=template&id=69faaa16& ***!
  \*************************************************************************************************************************************************************************************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"render\": function() { return /* binding */ render; },\n/* harmony export */   \"staticRenderFns\": function() { return /* binding */ staticRenderFns; }\n/* harmony export */ });\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\n    \"div\",\n    [\n      _c(\n        \"b-button\",\n        { attrs: { variant: \"info\" }, on: { click: _vm.duplicateEntities } },\n        [_vm._v(\" duplicate entities \")]\n      ),\n      _c(\"div\", [_vm._v(\"numbersEntities: \" + _vm._s(_vm.numbersEntities))]),\n    ],\n    1\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\n\n\n//# sourceURL=webpack://EntityDrupal/./src/views/TextDuplicateEntities.vue?./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options");

/***/ }),

/***/ "./node_modules/babel-loader/lib/index.js??clonedRuleSet-120[0].rules[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/views/TextDuplicateEntities.vue?vue&type=script&lang=js&":
/*!*************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/babel-loader/lib/index.js??clonedRuleSet-120[0].rules[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/views/TextDuplicateEntities.vue?vue&type=script&lang=js& ***!
  \*************************************************************************************************************************************************************************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _siteweb_AppVuejs_create_website_node_modules_babel_runtime_helpers_esm_typeof_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./node_modules/@babel/runtime/helpers/esm/typeof.js */ \"./node_modules/@babel/runtime/helpers/esm/typeof.js\");\n/* harmony import */ var _siteweb_AppVuejs_create_website_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./node_modules/@babel/runtime/helpers/esm/objectSpread2.js */ \"./node_modules/@babel/runtime/helpers/esm/objectSpread2.js\");\n/* harmony import */ var core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! core-js/modules/es.object.to-string.js */ \"./node_modules/core-js/modules/es.object.to-string.js\");\n/* harmony import */ var core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var core_js_modules_es_promise_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! core-js/modules/es.promise.js */ \"./node_modules/core-js/modules/es.promise.js\");\n/* harmony import */ var core_js_modules_es_promise_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_promise_js__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var core_js_modules_es_object_keys_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! core-js/modules/es.object.keys.js */ \"./node_modules/core-js/modules/es.object.keys.js\");\n/* harmony import */ var core_js_modules_es_object_keys_js__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_object_keys_js__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var vuex__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! vuex */ \"./node_modules/vuex/dist/vuex.esm.js\");\n\n\n\n\n\n//\n//\n//\n//\n//\n//\n//\n//\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n  name: \"TextDuplicateEntities\",\n  data: function data() {\n    return {\n      payload: {\n        id: 139,\n        //152, //139,\n        content: {\n          name: [{\n            value: \"Bienvenue chez test\"\n          }],\n          field_domain_access: [{\n            target_id: \"test328_wb_horizon_kksa\"\n          }],\n          field_domain_source: [{\n            target_id: \"test328_wb_horizon_kksa\"\n          }],\n          is_default_theme: [{\n            value: false\n          }]\n        }\n      }\n    };\n  },\n  computed: (0,_siteweb_AppVuejs_create_website_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"])((0,_siteweb_AppVuejs_create_website_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"])({}, (0,vuex__WEBPACK_IMPORTED_MODULE_5__.mapState)([\"entityDuplicate\"])), (0,vuex__WEBPACK_IMPORTED_MODULE_5__.mapGetters)([\"numbersEntities\"])),\n  mounted: function mounted() {//\n  },\n  methods: {\n    duplicateEntities: function duplicateEntities() {\n      var _this = this;\n\n      this.$store.dispatch(\"getMatriceEntities\", this.payload).then(function () {\n        _this.prepareSaveEntities(_this.$store.state);\n      });\n    },\n    prepareSaveEntities: function prepareSaveEntities(state) {\n      var _this2 = this;\n\n      /**\n       * Permet de creer les sous contenus et return les target_ids.\n       * @param {Array} items\n       * @param {Integer} i\n       * @param {Array} values\n       */\n      var loopItem = function loopItem(items, i) {\n        var values = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [];\n        return new Promise(function (resolv, reject) {\n          console.log(\"loopItem : \", items);\n\n          if (items[i]) {\n            var item = items[i];\n\n            if (items[i].entities) {\n              var keys = Object.keys(items[i].entities);\n              loopFieldEntity(items[i].entities, keys[0], items[i].entity, keys, 0).then(function (entity) {\n                _this2.$store.dispatch(\"saveEntity\", {\n                  entity_type_id: items[i].target_type,\n                  value: entity,\n                  index: i\n                }).then(function (resp) {\n                  //items[i].entity = resp.data.json;\n                  values.push({\n                    target_id: resp.data.id\n                  });\n                  i = i + 1;\n\n                  if (i < items.length) {\n                    // loopEntityPromise(items, i).then((resp) => {\n                    //   values.push({ target_id: resp.data.id });\n                    // });\n                    resolv(loopItem(items, i, values));\n                  } else resolv(values);\n                }).catch(function (er) {\n                  console.log(\" catch : \", er);\n                  reject(er);\n                });\n              });\n            } else {\n              _this2.$store.dispatch(\"saveEntity\", {\n                entity_type_id: item.target_type,\n                value: item.entity,\n                index: i\n              }).then(function (resp) {\n                values.push({\n                  target_id: resp.data.id\n                });\n                i = i + 1;\n\n                if (items.length <= i) {\n                  resolv(loopItem(items, i, values));\n                } else {\n                  resolv(values);\n                }\n              }).catch(function (er) {\n                console.log(\"catch : \", er);\n                reject(er);\n              });\n            }\n          } else resolv(values);\n        });\n      }; //\n\n      /**\n       * loopFieldEntity parcourt les entites enfants d'une entité parente, et a chaque passage MAJ l'entité parent.\n       *\n       * @param {Array} datas // tableau des entites enfants.\n       * @param {String} fieldname // fieldname\n       * @param {String} entity // entité parente\n       * @param {Array} keys // tableau des champs à parcourirt (permet de passer à l'etape suivante)\n       * @param {Integer} i   // l'etape encours (permet de passer à l'etape suivante)\n       * @return {Object} entity // l'entité parente MAJ.\n       */\n\n\n      var loopFieldEntity = function loopFieldEntity(datas, fieldname, entity, keys, i) {\n        return new Promise(function (resolv) {\n          console.log(\"loopFieldEntity : \", datas); // Si le champs contient des données,\n          // on parcourt chacune des entrées.\n\n          if (datas[fieldname] && datas[fieldname].length > 0) {\n            // Pour chaque champs, on cree les contenus et on recupere les ids.\n            loopItem(datas[fieldname], 0).then(function (resp) {\n              console.log(\"loopFieldEntity result of loopItem : \", resp);\n              entity[fieldname] = resp; // on passe au champs suivant.\n\n              i = i + 1;\n\n              if (keys.length > i) {\n                resolv(loopFieldEntity(datas, keys[i], entity, keys, i));\n              } else {\n                resolv(entity);\n              }\n            });\n          } else resolv(entity);\n        });\n      };\n      /**\n       * Permet de cree l'entité parent, apres que tous les entitées enfants soient ok.\n       * il est appelle par tous les enfants possedant des enfants.\n       * loopEntityPromise recois un tableau contenant les entites qui doivent etre cree.\n       * il retourne un tableau de target_ids => [{target_id:...},{target_id:...}, ... ].\n       *\n       * @param {*} datas\n       * @param {*} i\n       * @return resp [{id:..., json:...}] // return un json avec une proprieté json et une autre id.\n       */\n\n\n      var loopEntityPromise = function loopEntityPromise(datas) {\n        var i = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n        var values = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [];\n        return new Promise(function (resolv, reject) {\n          console.log(\"loopEntityPromise : \", datas);\n\n          if (datas[i]) {\n            // S'il contient des sous entités.\n            if (datas[i].entities && (0,_siteweb_AppVuejs_create_website_node_modules_babel_runtime_helpers_esm_typeof_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(datas[i].entities) === \"object\") {\n              var keys = Object.keys(datas[i].entities);\n              loopFieldEntity(datas[i].entities, keys[0], datas[i].entity, keys, 0).then(function (entity) {\n                console.log(\" loopEntityPromise SEND with override entity : \", entity);\n\n                _this2.$store.dispatch(\"saveEntity\", {\n                  entity_type_id: datas[i].target_type,\n                  value: entity,\n                  index: i\n                }).then(function (resp) {\n                  values.push({\n                    target_id: resp.data.id\n                  }); // datas[i].entity = resp.data.json;\n\n                  i = i + 1;\n\n                  if (i < datas.length) {\n                    resolv(loopEntityPromise(datas, i));\n                  } else resolv(values);\n                }).catch(function (er) {\n                  console.log(\"catch : \", er);\n                  reject(er);\n                });\n              });\n            } // S'il ne contient pas de sous entité.\n            else {\n              _this2.$store.dispatch(\"saveEntity\", {\n                entity_type_id: datas[i].target_type,\n                value: datas[i].entity,\n                index: i\n              }).then(function (resp) {\n                values.push({\n                  target_id: resp.data.id\n                }); // datas[i].entity = resp.data.json;\n\n                i = i + 1;\n\n                if (i < datas.length) {\n                  resolv(loopEntityPromise(datas, i));\n                } else resolv(values);\n              }).catch(function (er) {\n                console.log(\"catch : \", er);\n                reject(er);\n              });\n            }\n          } else {\n            console.log(\" loopEntityPromise END \");\n            resolv([]);\n          }\n        });\n      };\n\n      loopEntityPromise(state.entityDuplicate, 0);\n    }\n  }\n});\n\n//# sourceURL=webpack://EntityDrupal/./src/views/TextDuplicateEntities.vue?./node_modules/babel-loader/lib/index.js??clonedRuleSet-120%5B0%5D.rules%5B0%5D.use%5B0%5D!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options");

/***/ })

}]);